function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,r){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=t){var n,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw i}}}}var stringable=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return typeis(e)===Types.string&&(!r||e.length>0)},strLen=function(e){var r=0;if(!stringable(e))return r;for(var t=0,n=e.length;t<n;t++)r+=e.charCodeAt(t)<256?1:3;return r},kRegSignNumberic=new RegExp("^\\d+(\\.|\\.\\d+)?$","i"),kRegUnSignNumberic=new RegExp("^\\-\\d+(\\.|\\.\\d+)?$","i"),kRegNumberic=new RegExp("^\\-?\\d+(\\.|\\.\\d+)?$","i"),kRegStartStrictNumberic=new RegExp("^(\\-?[1-9]|0\\.\\d+|0$)","i"),kRegEndStrictNumberic=new RegExp("\\.$","i"),kEmptySpacer=new RegExp("(^$|^\\s+$)","i"),isNil=function(e){return isNull(e)||isUndefined(e)||typeis(e)===Types.string&&re(kEmptySpacer,e)},isNull=function(e){return typeis(e)===Types.null},isUndefined=function(e){return typeis(e)===Types.undefined},isNumberic=function(e,r){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(isNil(e))return!1;if(!re(kRegStartStrictNumberic,e)||re(kRegEndStrictNumberic,e))return!1;var n=+e;return!isNaN(n)&&(t?typeis(r)===Types.bool?re(r?kRegSignNumberic:kRegUnSignNumberic,n):re(kRegNumberic,n):typeis(n)===Types.number)},objectable=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return typeis(e)===Types.object&&(!r||Object.keys(e).length>0)},optional=function optional(path,obj){var separator=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",rs=void 0,properties;if(!stringable(path)||!stringable(separator))return rs;var p=path,o;if(properties=-1===p.indexOf(separator)?Array.of(p):p.split(separator),isNil(obj)){try{o=isNumberic(properties[0])?eval("this[".concat(properties[0],"]")):eval("this."+properties[0])}catch(e){o=Object.prototype.constructor()}if(properties.shift(),typeis(o)===Types.object)o=o;else{if(typeis(o)!==Types.array)return rs;o=o}}else o=obj;return rs=properties.reduce((function(e,r){return objectable(e)?e[r]:arrayable(e)?isNumberic(r)?e[+r]:e[r]:e?e[r]:void 0}),o),rs},extractable=function extractable(){for(var rs=Object.prototype.constructor(),_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(!arrayable(args)||args.length<2)return rs;var t=Array.prototype.slice.call(args,-1)[0];if(typeis(t)===Types.string)try{t=eval("this."+t)}catch(e){t=void 0}if(!objectable(t))return rs;var o=Array.prototype.slice.apply(args,[0,-1]),_iterator=_createForOfIteratorHelper(o),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var i=_step.value;typeis(i)===Types.string?rs[i]=optional(i,t)||String.prototype.constructor():typeis(i)===Types.array?2===i.length?rs[i[0]]=(typeis(i[1])===Types.string?optional(i[1],t):i[1])||String.prototype.constructor():3===i.length&&(rs[i[0]]=objectable(i[2])||arrayable(i[2])?optional(i[1],i[2]):String.prototype.constructor()):typeis(i)===Types.object&&(rs=Object.assign(rs,i))}}catch(e){_iterator.e(e)}finally{_iterator.f()}return rs},assign=function e(r,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";typeis(t)!==Types.object&&typeis(t)!==Types.array||(stringable(r)||arrayable(r))&&(stringable(r)&&(r=r.split(o)),r.length>1?e(r,t[r.shift()],n):t[r[0]]=n)},objReverse=function(e){if(!objectable(e))return e;var r=e,t=Object.keys(r).reduce((function(e,t){var n=String(r[t]),o=[];return arrayable(e[n],!1)&&(o=e[n]),Object.assign(e,_defineProperty({},n,o.concat(t)))}),{});for(var n in t)t.hasOwnProperty(n)&&(t[n]=Array.isArray(t[n])&&1===t[n].length?t[n][0]:t[n]);return t},Types,TypesDesc;!function(e){e.number="number",e.string="string",e.bool="bool",e[void 0]="undefined",e.null="null",e.array="array",e.uint8Array="uint8Array",e.object="object",e.function="function",e.bigInt="bigInt",e.date="date",e.weakMap="weakMap",e.map="map",e.weakSet="weakSet",e.set="set",e.symbol="symbol",e.arrayBuffer="arrayBuffer",e.unknown=""}(Types||(Types={})),function(e){e["[object Number]"]="number",e["[object String]"]="string",e["[object Boolean]"]="bool",e["[object Undefined]"]="undefined",e["[object Null]"]="null",e["[object Array]"]="array",e["[object Uint8Array]"]="uint8Array",e["[object Object]"]="object",e["[object Function]"]="function",e["[object BigInt]"]="bigInt",e["[object Date]"]="date",e["[object WeakMap]"]="weakMap",e["[object Map]"]="map",e["[object WeakSet]"]="weakSet",e["[object ArrayBuffer]"]="arrayBuffer",e["[object Set]"]="set",e["[object Symbol]"]="symbol"}(TypesDesc||(TypesDesc={}));var inEnum=function(e,r){return!(!objectable(e)||e!==Object(e))&&(Object.prototype.hasOwnProperty.call(e,r)||Object.values(e).indexOf(r)>-1)},typeis=function(e){var r=Object.prototype.toString.call(e),t=Types.unknown;return Object.keys(TypesDesc).includes(r)&&(t=Types[TypesDesc[r]]),t},re=function(e,r){return e.test(r.toString())},arrayable=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(typeis(e)===Types.array||typeis(e)===Types.uint8Array)&&(!r||e.length>0)},arrayUnique=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!arrayable(e))return e;if(r){var t=e.map((function(e){return JSON.stringify(e)}));return Array.from(new Set(t)).map((function(e){return JSON.parse(e)}))}return Array.from(new Set(e))},arrValsCount=function(e){var r={};return arrayable(e)?e.reduce((function(e,r){var t=r+"";return e[t]?e[t]++:e[t]=1,e}),r):r},arrValCount=function(e,r){if(!arrayable(e)||!e.includes(r))return 0;var t=arrValsCount(e),n=r+"";return t.hasOwnProperty(n)?t[n]:0},flat=function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=Array.prototype.constructor();if(!arrayable(r,!1))return r;var o=isNaN(t)?1:Number(t);if(!o)return Array.prototype.slice.call(r);for(var i=0,a=r.length>>>0;i<a;i++)n=n.concat(e(r[i],o-1));return n},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",InvalidCharacterError=function e(r){_classCallCheck(this,e),_defineProperty(this,"name",void 0),_defineProperty(this,"message",void 0),this.message=r,this.name="InvalidCharacterError"},_btoa,_atob;_btoa="undefined"!=typeof window&&window.btoa?window.btoa:function(e){for(var r=String(e),t="",n=0,o=0,i=0,a=chars;r.charAt(0|i)||(a="=",i%1);t+=a.charAt(63&n>>8-i%1*8)){if((o=r.charCodeAt(i+=3/4))>255)throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return t},_atob="undefined"!=typeof window&&window.atob?window.atob:function(e){var r=String(e).replace(/[=]+$/,"");if(r.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n="",o=0,i=0,a=0;t=r.charAt(a++);~t&&(i=o%4?64*i+t:t,o++%4)?n+=String.fromCharCode(255&i>>(-2*o&6)):0)t=chars.indexOf(t);return n};var url2Blob=function(e){if("undefined"==typeof window)throw new Error("url2Blob only works in browser environment");if(!stringable(e))throw new TypeError(e+" can not be null");var r=e.split(",");if(!arrayable(r))throw new ReferenceError("invalid data url");var t=r[0].match(/:(.*?);/);if(!arrayable(t)||t.length<2)throw new ReferenceError("invalid data format");for(var n=t,o=_atob(r[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new Blob([a],{type:n[1]})},str2Buffer=function(e){if(stringable(e))return e=_btoa(unescape(encodeURIComponent(e))),new Uint8Array(Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)})))},buffer2Str=function(e){if(arrayable(e)||objectable(e)||stringable(e)){typeis(e)===Types.string&&(e=JSON.parse.call(null,e));var r=Object.values(e);if(arrayable(r))return decodeURIComponent(escape(_atob(String.fromCharCode.apply(null,Array.prototype.map.call(new Uint8Array(r),(function(e){return e}))))))}},formatNumber=function(e){return(e=e.toString())[1]?e:"0"+e},formatDate=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",t=String.prototype.constructor();if(typeis(e)!==Types.date&&!stringable(e))return t;if(typeis(e)===Types.string&&(e=new Date(e)),"Invalid Date"===e.toString())return t;for(var n=e,o={Y:n.getFullYear(),M:n.getMonth()+1,D:n.getDate(),h:n.getHours(),m:n.getMinutes(),s:n.getSeconds()},i=0,a=Object.keys(o).length>>>0;i<a;i++)if(o.hasOwnProperty(o[i])&&isNaN(o[o[i]]))return t;var s={Y:o.Y.toString(),yyyy:o.Y.toString(),M:o.M.toString(),MM:formatNumber(o.M),d:o.D.toString(),dd:formatNumber(o.D),h:o.h.toString(),hh:formatNumber(o.h),m:o.m.toString(),mm:formatNumber(o.m),s:o.s.toString(),ss:formatNumber(o.s)},l=r.split(/-| |:|\//);t=r;for(var u=0;u<l.length;u++){var c=l[u];t=t.replace(c,s[c])}return t},timezoneDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;if([e,r,t,n,o,i].every((function(e){return typeis(e)===Types.number&&e>=0}))){var s=new Date(Date.UTC(e,r-1,t,n,o,i)),l=new Date(s.toLocaleString("en-US",{timeZone:"UTC"})),u=s;if(stringable(a))u=new Date(s.toLocaleString("en-US",{timeZone:a}));else if("Invalid Date"===(u=new Date("".concat(r,"/").concat(t,"/").concat(e," ").concat(n,":").concat(o,":").concat(i))).toString())return;var c=l.getTime()-u.getTime();return s.setTime(s.getTime()+c),s}},quarterable=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Q",n=Array(2).fill(String.prototype.constructor()),o=new RegExp("^\\d{4}".concat(t,"\\d$"),"g");if(stringable(e)&&o.test(e)){var i=e.split(t),a=_slicedToArray(i,2),s=a[0],l=a[1];if(isNumberic(s)&&isNumberic(l)){var u=+l+ +r,c=4*+s+u;return u%4==0?(n[0]=0===u?s-1:+s+u/4-1,n[1]=4):(n[1]=c%4,n[0]=(c-n[1])/4),n.join(t)}}},mappable=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return typeis(e)===Types.map&&(!r||e.size>0)},rangeRandom=function(e,r){return!isNumberic(e)||!isNumberic(r)||e>r?Math.random():Math.random()*(r-e)+e},numberic=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2?arguments[2]:void 0;if(isNumberic(e,void 0,!1)){var n=+e,o=Math.sign(n);n=Math.abs(n);var i=isNumberic(r,!0)?+(1+Array(r).fill(0).join("")):100,a=Math.round((n+Number.EPSILON)*i)/i;return o*((t=isNumberic(t,!0)?t:r)>0?+a.toFixed(t):a)}},sleep=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;return new Promise((function(r){return setTimeout(r,e)}))},settable=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return typeis(e)===Types.set&&(!r||e.size>0)},PromiseStatus;!function(e){e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(PromiseStatus||(PromiseStatus={}));var PromisePolyfill=function(){function e(r){var t=this;_classCallCheck(this,e),_defineProperty(this,"status",void 0),_defineProperty(this,"value",void 0),_defineProperty(this,"reason",void 0),_defineProperty(this,"onResolvedClosures",void 0),_defineProperty(this,"onRejectedClosures",void 0),this.status=PromiseStatus.pending,this.value=void 0,this.reason=void 0,this.onResolvedClosures=[],this.onRejectedClosures=[];var n=function(e){t.status===PromiseStatus.pending&&(t.status=PromiseStatus.rejected,t.reason=e,t.onRejectedClosures.forEach((function(e){return e()})))};try{r((function(e){t.status===PromiseStatus.pending&&(t.status=PromiseStatus.fulfilled,t.value=e,t.onResolvedClosures.forEach((function(e){return e()})))}),n)}catch(e){n(e)}}return _createClass(e,[{key:"then",value:function(r,t){var n=this;r="function"==typeof r?r:function(e){return e},t="function"==typeof t?t:function(e){throw e};var o=new e((function(e,i){n.status===PromiseStatus.fulfilled&&micro((function(){try{var t,a=null===(t=r)||void 0===t?void 0:t(n.value);resolvePromise(o,a,e,i)}catch(e){i(e)}})),n.status===PromiseStatus.rejected&&micro((function(){try{var r,a=null===(r=t)||void 0===r?void 0:r(n.reason);resolvePromise(o,a,e,i)}catch(e){i(e)}})),n.status===PromiseStatus.pending&&(n.onResolvedClosures.push((function(){micro((function(){try{var t,a=null===(t=r)||void 0===t?void 0:t(n.value);resolvePromise(o,a,e,i)}catch(e){i(e)}}))})),n.onRejectedClosures.push((function(){micro((function(){try{var r,a=null===(r=t)||void 0===r?void 0:r(n.reason);resolvePromise(o,a,e,i)}catch(e){i(e)}}))})))}));return o}},{key:"catch",value:function(e){return this.then(void 0,e)}}]),e}();function micro(e){return"undefined"!=typeof window?window.queueMicrotask(e):process.nextTick(e)}function resolvePromise(e,r,t,n){if(r===e)return n(new TypeError("Chaining cycle detected for promise"));var o=!1;if(null===r||"object"!==_typeof(r)&&"function"!=typeof r)t(r);else try{var i=r.then;"function"==typeof i?i.call(r,(function(r){o||(o=!0,resolvePromise(e,r,t,n))}),(function(e){o||(o=!0,n(e))})):t(r)}catch(e){if(o)return;o=!0,n(e)}}_defineProperty(PromisePolyfill,"resolve",void 0),_defineProperty(PromisePolyfill,"reject",void 0),_defineProperty(PromisePolyfill,"race",void 0),_defineProperty(PromisePolyfill,"all",void 0),_defineProperty(PromisePolyfill,"deferred",void 0),PromisePolyfill.resolve=function(e){return new PromisePolyfill((function(r,t){return r(e)}))},PromisePolyfill.reject=function(e){return new PromisePolyfill((function(r,t){return t(e)}))},PromisePolyfill.race=function(e){return new PromisePolyfill((function(r,t){for(var n=0;n<e.length;n++)e[n].then(r,t)}))},PromisePolyfill.all=function(e){var r=Array(),t=0;return new PromisePolyfill((function(n,o){for(var i=function(i){e[i].then((function(o){!function(n,o,i){r[n]=o,++t===e.length&&i(r)}(i,o,n)}),o)},a=0;a<e.length;a++)i(a)}))},PromisePolyfill.deferred=function(){var e={};return e.promise=new PromisePolyfill((function(r,t){e.resolve=r,e.reject=t})),e};var Jstd=Object.freeze({__proto__:null,arrayable:arrayable,arrayUnique:arrayUnique,arrValsCount:arrValsCount,arrValCount:arrValCount,flat:flat,get _btoa(){return _btoa},get _atob(){return _atob},url2Blob:url2Blob,str2Buffer:str2Buffer,buffer2Str:buffer2Str,typeis:typeis,re:re,formatDate:formatDate,timezoneDate:timezoneDate,quarterable:quarterable,get Types(){return Types},get TypesDesc(){return TypesDesc},inEnum:inEnum,mappable:mappable,rangeRandom:rangeRandom,numberic:numberic,objectable:objectable,optional:optional,extractable:extractable,assign:assign,objReverse:objReverse,isNil:isNil,isNull:isNull,isUndefined:isUndefined,isNumberic:isNumberic,sleep:sleep,settable:settable,stringable:stringable,strLen:strLen,PromisePolyfill:PromisePolyfill});export default Jstd;export{Jstd,PromisePolyfill,Types,TypesDesc,_atob,_btoa,arrValCount,arrValsCount,arrayUnique,arrayable,assign,buffer2Str,extractable,flat,formatDate,inEnum,isNil,isNull,isNumberic,isUndefined,mappable,numberic,objReverse,objectable,optional,quarterable,rangeRandom,re,settable,sleep,str2Buffer,strLen,stringable,timezoneDate,typeis,url2Blob};
